<!DOCTYPE html>
<html lang="en">

<script type="text/javascript">
function findTotal(){
	var arr = document.getElementsByName('phone_tot');
	var tot=0;
	for(var i=0;i<arr.length;i++){
		if(parseInt(arr[i].value))
			tot += parseInt(arr[i].value);
		};
		document.getElementById('total').value = tot;
};
</script>

<head>
	<title>Sales Rep</title>
	<%- include header.ejs %>
</head>
<body>
	<%- include employee-navbar.ejs %>
	<div class='container topSpacing'>
		<div class="w3-container">
			<div class="row">
				<form class="col s12">
						<h4>Place Business Order</h4>
						<div class="row">
							<div class="input-field col s6">
							<select class="browser-default">
							<option value="" disabled selected>Select Business Customer</option>
									<% customers.forEach(function(customer) { %>
									<option><%= customer.lastName %>, <%=customer.firstName %></option>
									<% }); %>
							</select>
							</div>
							<div class="input-field col s6">
								<a class="btn-floating btn-small waves-effect waves-light red" href="/newCustomer"><i class="material-icons">add</i></a>
							</div>
						</div>
						
						<div class='sectionSpacer'></div>
						
						<label style="font-size:1.5rem;color:#000000;">Choose Phone Models</label>
						<div class="row" style='margin:auto;'>
							<ul class="collection with-header phoneList">
								<% if(phoneModels.length == 0) { %>
									<li class="collection-item">
										Opps, failed to load the phone models. Please try again later
									</li>
								<% } %>
								<% phoneModels.forEach(function(phoneModel) { %>
								<li class="collection-item">
									<%= phoneModel.fields.description %>
									<a href="#!" class="secondary-content">
											<label><%= '$' + phoneModel.fields.price %></label>
									<input onblur="findTotal()" value=0 name="phone_tot" type="text" class="validate phoneCount"/><br>
									</a>
									<div style='clear:both;'></div>
								</li>
								<% }); %>
							</ul>
						</div>

						<div class='sectionSpacer'></div>
						
						<label style="font-size:1.5rem;color:#000000;">Shipping Address</label>
						<div class="row">
							<div class="input-field col">
								<i class="material-icons prefix">location_on</i>
					<input id="shipping_address" type="text" class="validate" style="width:85%;">
					<label for="shipping_address">Address</label>
							</div>
							<div class="input-field col">
					<input id="city" type="text" class="validate">
					<label for="city">City</label>
							</div>
							<div class="input-field col">
								<select class="browser-default">
							<option value="" disabled selected>Select State/Territory</option>
									<% states.forEach(function(st) { %>
									<option id="state_<%= st.id %>"><%= st.state %></option>
									<% }); %>
							</select>
							</div>
							<div class="input-field col">
					<input id="zip" type="text" class="validate" style="width:30%;">
					<label for="zip">Zip Code</label>
							</div>
						</div>

						<button class="btn waves-effect waves-light" type="submit" name="action">Place Order
						<i class="material-icons right">send</i>
					</button>
				</form>
			</div>
		</div>
	</div>
</body>
</html>
