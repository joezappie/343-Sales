<!DOCTYPE html>
<html lang="en">
<head>
	<title>Sales Homepage - Checkout</title>
	<%- include header.ejs %>
</head>
<script>
	//Save default values do we don't get any undefined shennanigans
	var shippingName = document.getElementById("shipping_name").value;
	var shippingStreetAddress = document.getElementById("shipping_street_address").value;
	var shippingCity = document.getElementById("shipping_city").value;
	var shippingZipCode = document.getElementById("shipping_zip_code").value;
	var shippingState = document.getElementById("shipping_state").value;

	function useBillingInfo()
	{
		if (document.getElementById("shipping_is_billing").checked == true)
		{
			//store values if we uncheck
			shippingName = document.getElementById("shipping_name").value;
			shippingStreetAddress = document.getElementById("shipping_street_address").value;
			shippingCity = document.getElementById("shipping_city").value;
			shippingZipCode = document.getElementById("shipping_zip_code").value;
			shippingState = document.getElementById("shipping_state").value;

			//set shipping to billing
			document.getElementById("shipping_name").value = document.getElementById("cardholder_name").value;
			document.getElementById("shipping_street_address").value = document.getElementById("billing_street_address").value;
			document.getElementById("shipping_city").value = document.getElementById("billing_city").value;
			document.getElementById("shipping_zip_code").value = document.getElementById("billing_zip_code").value;
			document.getElementById("shipping_state").value = document.getElementById("billing_state").value;

			//update dropdown menu with new value
			$('select').material_select();

			//redraw labels so they don't overlap with text
			Materialize.updateTextFields()
		}
		else
		{
			//restore stored values
			document.getElementById("shipping_name").value = shippingName;
			document.getElementById("shipping_street_address").value = shippingStreetAddress;
			document.getElementById("shipping_city").value = shippingCity;
			document.getElementById("shipping_zip_code").value = shippingZipCode;
			document.getElementById("shipping_state").value = shippingState;

			//update dropdown menu with new value
			$('select').material_select();

			//redraw labels so they don't overlap with text
			Materialize.updateTextFields()
		}
	}
</script>
<body>
	<%- include consumer-navbar.ejs %>
	<div class="bigContainer" >
		<div class="row">
			<form class="col s12">
				<div class="col s8">
					<div class="row">
						<h5>Credit Card Information:</h5>
					</div>
					<div class="row">
						<div class="input-field col s5">
							<label for="credit_card_num" >Credit Card Number</label>
							<input id="credit_card_num" name="credit_card_num" type="text" class="validate"/>
						</div>
						<div class="input-field col s5">
							<Label for="cardholder_name">Cardholder Name</Label>
							<input id="cardholder_name" name="cardholder_name" type="text" class="validate"/>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s2">
							<label for="security_code">Security Code</label>
							<input id="security_code" name="security_code" type="text" style="text-align:center;" class="validate"/>
						</div>
						<div class="input-field col s3 offset-s1" style="text-align:right;">
							<label>Expiration Date:</label>
						</div>
						<div class="input-field col s2">
							<select id="expiration_date_month" name="expiration_date_month" class="browser-default">
						    <option value="1">January</option>
						    <option value="2">Febrary</option>
								<option value="3">March</option>
								<option value="4">April</option>
								<option value="5">May</option>
								<option value="6">June</option>
								<option value="7">July</option>
								<option value="8">August</option>
								<option value="9">September</option>
								<option value="10">October</option>
								<option value="11">November</option>
								<option value="12">December</option>
						  </select>
						</div>
						<div class="input-field col s2">
							<select id="expiration_year" name="expiration_year" class="browser-default">
						    <option value="2017">2017</option>
						    <option value="2018">2018</option>
								<option value="2019">2019</option>
								<option value="2020">2020</option>
								<option value="2021">2021</option>
								<option value="2022">2022</option>
								<option value="2023">2023</option>
								<option value="2024">2024</option>
								<option value="2025">2025</option>
								<option value="2026">2026</option>
								<option value="2027">2027</option>
						  </select>
						</div>
					</div>
					<div class="row">
						<h5>Billing Address:</h5>
					</div>
					<div class="row">
						<div class="input-field col s5">
							<Label for="billing_street_address">Street Address</Label>
							<input id="billing_street_address" name="billing_street_address" type="text" class="validate"/>
						</div>
						<div class="input-field col s5">
							<Label for="billing_city">City</Label>
							<input id="billing_city" name="billing_city" type="text" class="validate"/>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s3">
							<Label for="billing_zip_code">Zip Code</Label>
							<input id="billing_zip_code" name="billing_zip_code" type="text" class="validate"/>
						</div>
						<div class="input-field col s2 offset-s1">
							<label>State:</label>
						</div>
						<div class="input-field col s4">
							<!--I couldn't get this to work.-->
							<select id='billing_state' name='billing_state' class="browser-default">
								<option value="" disabled selected>Select State/Territory</option>
								<% states.forEach(function(st) { %>
									<option value="<%= st.id %>"><%= st.state %></option>
								<% }); %>
							</select>
						</div>
					</div>
					<div class="row">
						<h5>Shipping Address:</h5>
					</div>
					<div class="row">
						<div class="input-field col s4">
								<input type="checkbox" class="filled-in" id="shipping_is_billing" name="shipping_is_billing" onclick="useBillingInfo()"/>
	      				<label for="shipping_is_billing">Use Billing Address</label>
						</div>
						<div class="input-field col s5 offset-s1">
							<Label for="shipping_name">Name</Label>
							<input id="shipping_name" name=="shipping_name" type="text" class="validate"/>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s5">
							<Label for="shipping_street_address">Street Address</Label>
							<input id="shipping_street_address" name="shipping_street_address" type="text" class="validate"/>
						</div>
						<div class="input-field col s5">
							<Label for="shipping_city">City</Label>
							<input id="shipping_city" name="shipping_city" type="text" class="validate"/>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s3">
							<Label for="shipping_zip_code">Zip Code</Label>
							<input id="shipping_zip_code" name="shipping_zip_code" type="text" class="validate"/>
						</div>
						<div class="input-field col s2 offset-s1">
							<label>State:</label>
						</div>
						<div class="input-field col s4">
							<!--I couldn't get this to work.-->
							<select id='shipping_state' name='shipping_state' class="browser-default">
								<option value="" disabled selected>Select State/Territory</option>
								<% states.forEach(function(st) { %>
									<option value="<%= st.id %>"><%= st.state %></option>
								<% }); %>
							</select>
						</div>
					</div>
					<div class="row">
						<button class="btn waves-effect waves-light" type="submit" name="submit">
							Submit
							<i class="material-icons right">send</i>
						</button>
					</div>
				</div>
				<div class="col s4">
					<div class="card-panel teal lighten-2">
						Put Shopping cart info here?
					</div>
					<div class="card-panel teal lighten-2">
						Here Too.
					</div>
					<div class="card-panel teal lighten-2">
						This is one continuous block of space,
						so it should work.
					</div>
			</form>
			</div>
		</div>
	</div>
</body>
</html>
